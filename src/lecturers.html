<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    body {
      font-family: Roboto, arial, helvetica, sans-serif;
    }

    #scrolly {
      position: relative;
      padding: 1rem;
    }

    .scrolly-overlay {
      position: relative;
      padding: 0;
      max-width: 35rem;
      margin: 0 auto;
    }

    .sticky-thing {
      position: -webkit-sticky;
      position: sticky;
      left: 0;
      width: 100%;
      margin: 0;
      z-index: 0;
      top: 12.5vh;
      height: 75vh;
      padding-bottom: 7vh;
      /* Center everything inside */
      display: flex;
      justify-content: center;
      flex-direction: column;
      justify-content: center;
    }

    .step {
      margin: 0 auto 2rem auto;
      margin-bottom: 25rem;

    }

    .step p {
      text-align: center;
      padding: 1rem;
      font-size: 1.25rem;
    }

    .hidden {
      visibility: hidden;
    }

    /* When it's less than 700 pixels wide, do normal scrollytelling */
    @media only screen and (min-width: 700px) {
      #scrolly.side-by-side {
        display: flex;
      }

      #scrolly.side-by-side>div {
        flex-basis: 0;
        flex-grow: 1;
        flex-shrink: 1;
        padding: 0.75em;
      }

      #scrolly.side-by-side .scrolly-overlay {
        margin-top: 70vh;
        order: 0;
        /* Change these to adjust sizing options */
        min-width: 15rem;
        max-width: 20rem;
      }

      #scrolly.side-by-side .sticky-thing {
        order: 1;
        flex-grow: 2;
      }

      .hidden {
        visibility: hidden;
      }

      .fade-in {
        transition: fill 0.5s ease-in-out;
        /* Transition for 1 second on the fill property */
      }

    }
  </style>
  <script src="https://unpkg.com/intersection-observer@0.5.1/intersection-observer.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/scrollama/3.0.4/scrollama.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/7.3.0/d3.min.js"></script>

</head>

<body>
  <section id="scrolly">
    <div class="sticky-thing">
      <div class="ai2html-container">
        <include src="lecturer_waffle.html"></include>
      </div>
    </div>

    <div class="scrolly-overlay">
      <div class="step" id="step-zero">
        <p></p>
      </div>
      <div class="step" id="step-one">
        <p></p>
      </div>
      <div class="step" id="step-two">
        <p></p>
      </div>
      <div class="step" id="step-three">
        <p></p>
      </div>
      <div class="step" id="step-four">
        <p></p>
      </div>
      <div class="step" id="step-five">
        <p></p>
      </div>
    </div>
  </section>

  <script>

    /* Scrollytelling code goes under here */
    // step 0: 

    // Initially hide all numbers
    d3.select("#g-ai0-3").classed('hidden', true);
    d3.select("#g-ai0-4").classed('hidden', true);
    d3.select("#g-ai0-5").classed('hidden', true);
    d3.select("#g-ai0-6").classed('hidden', true);
    d3.select("#g-ai0-7").classed('hidden', true);

    d3.select("#g-ai0-9").classed('hidden', true);
    d3.select("#g-ai0-10").classed('hidden', true);
    d3.select("#g-ai0-12").classed('hidden', true);
    d3.select("#g-ai0-13").classed('hidden', true);
    d3.select("#g-ai0-14").classed('hidden', true);

    d3.select("#g-ai0-19").classed('hidden', true);
    d3.select("#g-ai0-20").classed('hidden', true);
    d3.select("#g-ai0-21").classed('hidden', true);
    d3.select("#g-ai0-22").classed('hidden', true);
    d3.select("#g-ai0-23").classed('hidden', true);

    d3.select("#g-ai0-27").classed('hidden', true);
    d3.select("#g-ai0-28").classed('hidden', true);
    d3.select("#g-ai0-29").classed('hidden', true);
    d3.select("#g-ai0-30").classed('hidden', true);
    d3.select("#g-ai0-31").classed('hidden', true);



    // hide numbers
    d3.select("#dis2019").classed('hidden', true);
    d3.select("#prof2019").classed('hidden', true);
    d3.select("#total2019").classed('hidden', true);
    d3.select("#associate2019").classed('hidden', true);
    d3.select("#assistant2019").classed('hidden', true);
    d3.select("#lecturer2019").classed('hidden', true);

    d3.select("#dis2020").classed('hidden', true);
    d3.select("#prof2020").classed('hidden', true);
    d3.select("#total2020").classed('hidden', true);
    d3.select("#associate2020").classed('hidden', true);
    d3.select("#assistant2020").classed('hidden', true);
    d3.select("#lecturer2020").classed('hidden', true);

    d3.select("#dis2021").classed('hidden', true);
    d3.select("#prof2021").classed('hidden', true);
    d3.select("#total2021").classed('hidden', true);
    d3.select("#associate2021").classed('hidden', true);
    d3.select("#assistant2021").classed('hidden', true);
    d3.select("#lecturer2021").classed('hidden', true);

    d3.select("#dis2022").classed('hidden', true);
    d3.select("#prof2022").classed('hidden', true);
    d3.select("#total2022").classed('hidden', true);
    d3.select("#associate2022").classed('hidden', true);
    d3.select("#assistant2022").classed('hidden', true);
    d3.select("#lecturer2022").classed('hidden', true);

    d3.select("#dis2023").classed('hidden', true);
    d3.select("#prof2023").classed('hidden', true);
    d3.select("#total2023").classed('hidden', true);
    d3.select("#associate2023").classed('hidden', true);
    d3.select("#assistant2023").classed('hidden', true);
    d3.select("#lecturer2023").classed('hidden', true);

    // Step-in: When a section is scrolled into
    d3.select("#step-zero").on('stepin', function (e) {
      console.log("Got to step zero");
      d3.select("#g-ai0-8").classed('hidden', true);
      d3.select("#g-ai0-11").classed('hidden', true);
      d3.select("#g-ai0-18").classed('hidden', true);
      d3.select("#g-ai0-26").classed('hidden', true);

      d3.select("#g-ai0-7").classed('hidden', false);
      d3.select("#g-ai0-14").classed('hidden', false);
      d3.select("#g-ai0-23").classed('hidden', false);
      d3.select("#g-ai0-27").classed('hidden', false);

      d3.select("#change2019-back2021 path")
        .classed("fade-in", true)
        .style("fill", "#f3722c");

      d3.select("#mdis2018").classed('hidden', true);
      d3.select("#mprof2018").classed('hidden', true);
      d3.select("#mtotal2018").classed('hidden', true);
      d3.select("#massociate2018").classed('hidden', true);
      d3.select("#massistant2018").classed('hidden', true);
      d3.select("#mlecturer2018").classed('hidden', true);

      d3.select("#mdis2019").classed('hidden', false);
      d3.select("#mprof2019").classed('hidden', false);
      d3.select("#mtotal2019").classed('hidden', false);
      d3.select("#massociate2019").classed('hidden', false);
      d3.select("#massistant2019").classed('hidden', false);
      d3.select("#mlecturer2019").classed('hidden', false);

      d3.select("#_x32_018-s").classed('hidden', true);
      d3.select("#_x32_019-s").classed('hidden', false);

      d3.select("#sdis2018").classed('hidden', true);
      d3.select("#sprof2018").classed('hidden', true);
      d3.select("#stotal2018").classed('hidden', true);
      d3.select("#sassociate2018").classed('hidden', true);
      d3.select("#sassistant2018").classed('hidden', true);
      d3.select("#slecturer2018").classed('hidden', true);

      d3.select("#sdis2019").classed('hidden', false);
      d3.select("#sprof2019").classed('hidden', false);
      d3.select("#stotal2019").classed('hidden', false);
      d3.select("#sassociate2019").classed('hidden', false);
      d3.select("#sassistant2019").classed('hidden', false);
      d3.select("#slecturer2019").classed('hidden', false);
    });

    d3.select("#step-one").on('stepin', function (e) {
      console.log("Got to step one");
      d3.select("#g-ai0-7").classed('hidden', true);
      d3.select("#g-ai0-14").classed('hidden', true);
      d3.select("#g-ai0-23").classed('hidden', true);
      d3.select("#g-ai0-27").classed('hidden', true);

      d3.select("#g-ai0-12").classed('hidden', false);
      d3.select("#g-ai0-3").classed('hidden', false);
      d3.select("#g-ai0-22").classed('hidden', false);
      d3.select("#g-ai0-30").classed('hidden', false);

      d3.select("#_x32_019-l").classed('hidden', true);
      d3.select("#_x32_020-l").classed('hidden', false);

      d3.select("#dis2019").classed('hidden', true);
      d3.select("#prof2019").classed('hidden', true);
      d3.select("#total2019").classed('hidden', true);
      d3.select("#associate2019").classed('hidden', true);
      d3.select("#assistant2019").classed('hidden', true);
      d3.select("#lecturer2019").classed('hidden', true);

      d3.select("#dis2020").classed('hidden', false);
      d3.select("#prof2020").classed('hidden', false);
      d3.select("#total2020").classed('hidden', false);
      d3.select("#associate2020").classed('hidden', false);
      d3.select("#assistant2020").classed('hidden', false);
      d3.select("#lecturer2020").classed('hidden', false);


      d3.select("#_x32_019-m").classed('hidden', true);
      d3.select("#_x32_020-m").classed('hidden', false);

      d3.select("#mdis2019").classed('hidden', true);
      d3.select("#mprof2019").classed('hidden', true);
      d3.select("#mtotal2019").classed('hidden', true);
      d3.select("#massociate2019").classed('hidden', true);
      d3.select("#massistant2019").classed('hidden', true);
      d3.select("#mlecturer2019").classed('hidden', true);

      d3.select("#mdis2020").classed('hidden', false);
      d3.select("#mprof2020").classed('hidden', false);
      d3.select("#mtotal2020").classed('hidden', false);
      d3.select("#massociate2020").classed('hidden', false);
      d3.select("#massistant2020").classed('hidden', false);
      d3.select("#mlecturer2020").classed('hidden', false);


      d3.select("#_x32_019-s").classed('hidden', true);
      d3.select("#_x32_020-s").classed('hidden', false);

      d3.select("#sdis2019").classed('hidden', true);
      d3.select("#sprof2019").classed('hidden', true);
      d3.select("#stotal2019").classed('hidden', true);
      d3.select("#sassociate2019").classed('hidden', true);
      d3.select("#sassistant2019").classed('hidden', true);
      d3.select("#slecturer2019").classed('hidden', true);

      d3.select("#sdis2020").classed('hidden', false);
      d3.select("#sprof2020").classed('hidden', false);
      d3.select("#stotal2020").classed('hidden', false);
      d3.select("#sassociate2020").classed('hidden', false);
      d3.select("#sassistant2020").classed('hidden', false);
      d3.select("#slecturer2020").classed('hidden', false);

    });

    d3.select("#step-two").on('stepin', function (e) {
      d3.select("#g-ai0-3").classed('hidden', true);
      d3.select("#g-ai0-12").classed('hidden', true);
      d3.select("#g-ai0-22").classed('hidden', true);
      d3.select("#g-ai0-30").classed('hidden', true);

      d3.select("#g-ai0-4").classed('hidden', false);
      d3.select("#g-ai0-13").classed('hidden', false);
      d3.select("#g-ai0-19").classed('hidden', false);
      d3.select("#g-ai0-29").classed('hidden', false);

      d3.select("#change2019-back2021 path")
        .classed("fade-in", true)
        .style("fill", "#005f73");


      d3.select("#_x32_020-m").classed('hidden', true);
      d3.select("#_x32_021-m").classed('hidden', false);

      d3.select("#mdis2020").classed('hidden', true);
      d3.select("#mprof2020").classed('hidden', true);
      d3.select("#mtotal2020").classed('hidden', true);
      d3.select("#massociate2020").classed('hidden', true);
      d3.select("#massistant2020").classed('hidden', true);
      d3.select("#mlecturer2020").classed('hidden', true);

      d3.select("#mdis2021").classed('hidden', false);
      d3.select("#mprof2021").classed('hidden', false);
      d3.select("#mtotal2021").classed('hidden', false);
      d3.select("#massociate2021").classed('hidden', false);
      d3.select("#massistant2021").classed('hidden', false);
      d3.select("#mlecturer2021").classed('hidden', false);

      d3.select("#_x32_020-s").classed('hidden', true);
      d3.select("#_x32_021-s").classed('hidden', false);

      d3.select("#sdis2020").classed('hidden', true);
      d3.select("#sprof2020").classed('hidden', true);
      d3.select("#stotal2020").classed('hidden', true);
      d3.select("#sassociate2020").classed('hidden', true);
      d3.select("#sassistant2020").classed('hidden', true);
      d3.select("#slecturer2020").classed('hidden', true);

      d3.select("#sdis2021").classed('hidden', false);
      d3.select("#sprof2021").classed('hidden', false);
      d3.select("#stotal2021").classed('hidden', false);
      d3.select("#sassociate2021").classed('hidden', false);
      d3.select("#sassistant2021").classed('hidden', false);
      d3.select("#slecturer2021").classed('hidden', false);
    });

    d3.select("#step-three").on('stepin', function (e) {
      d3.select("#g-ai0-4").classed('hidden', true);
      d3.select("#g-ai0-13").classed('hidden', true);
      d3.select("#g-ai0-19").classed('hidden', true);
      d3.select("#g-ai0-29").classed('hidden', true);

      d3.select("#g-ai0-5").classed('hidden', false);
      d3.select("#g-ai0-9").classed('hidden', false);
      d3.select("#g-ai0-20").classed('hidden', false);
      d3.select("#g-ai0-31").classed('hidden', false);

      d3.select("#change2019-back2021 path")
        .classed("fade-in", true)
        .style("fill", "#f3722c");

      d3.select("#change-2022 path")
        .classed("fade-in", true)
        .style("fill", "#f3722c");

      d3.select("#_x32_021-l").classed('hidden', true);
      d3.select("#_x32_022-l").classed('hidden', false);

      d3.select("#dis2021").classed('hidden', true);
      d3.select("#prof2021").classed('hidden', true);
      d3.select("#total2021").classed('hidden', true);
      d3.select("#associate2021").classed('hidden', true);
      d3.select("#assistant2021").classed('hidden', true);
      d3.select("#lecturer2021").classed('hidden', true);

      d3.select("#dis2022").classed('hidden', false);
      d3.select("#prof2022").classed('hidden', false);
      d3.select("#total2022").classed('hidden', false);
      d3.select("#associate2022").classed('hidden', false);
      d3.select("#assistant2022").classed('hidden', false);
      d3.select("#lecturer2022").classed('hidden', false);


      d3.select("#_x32_021-m").classed('hidden', true);
      d3.select("#_x32_022-m").classed('hidden', false);

      d3.select("#mdis2021").classed('hidden', true);
      d3.select("#mprof2021").classed('hidden', true);
      d3.select("#mtotal2021").classed('hidden', true);
      d3.select("#massociate2021").classed('hidden', true);
      d3.select("#massistant2021").classed('hidden', true);
      d3.select("#mlecturer2021").classed('hidden', true);

      d3.select("#mdis2022").classed('hidden', false);
      d3.select("#mprof2022").classed('hidden', false);
      d3.select("#mtotal2022").classed('hidden', false);
      d3.select("#massociate2022").classed('hidden', false);
      d3.select("#massistant2022").classed('hidden', false);
      d3.select("#mlecturer2022").classed('hidden', false);


      d3.select("#_x32_021-s").classed('hidden', true);
      d3.select("#_x32_022-s").classed('hidden', false);

      d3.select("#sdis2021").classed('hidden', true);
      d3.select("#sprof2021").classed('hidden', true);
      d3.select("#stotal2021").classed('hidden', true);
      d3.select("#sassociate2021").classed('hidden', true);
      d3.select("#sassistant2021").classed('hidden', true);
      d3.select("#slecturer2021").classed('hidden', true);

      d3.select("#sdis2022").classed('hidden', false);
      d3.select("#sprof2022").classed('hidden', false);
      d3.select("#stotal2022").classed('hidden', false);
      d3.select("#sassociate2022").classed('hidden', false);
      d3.select("#sassistant2022").classed('hidden', false);
      d3.select("#slecturer2022").classed('hidden', false);
    });

    d3.select("#step-four").on('stepin', function (e) {
      d3.select("#g-ai0-5").classed('hidden', true);
      d3.select("#g-ai0-9").classed('hidden', true);
      d3.select("#g-ai0-20").classed('hidden', true);
      d3.select("#g-ai0-31").classed('hidden', true);

      d3.select("#g-ai0-6").classed('hidden', false);
      d3.select("#g-ai0-10").classed('hidden', false);
      d3.select("#g-ai0-21").classed('hidden', false);
      d3.select("#g-ai0-28").classed('hidden', false);

      d3.select("#change_2023 path")
        .classed("fade-in", true)
        .style("fill", "#f3722c");

      d3.select("#_x32_022-l").classed('hidden', true);
      d3.select("#_x32_023-l").classed('hidden', false);

      d3.select("#dis2022").classed('hidden', true);
      d3.select("#prof2022").classed('hidden', true);
      d3.select("#total2022").classed('hidden', true);
      d3.select("#associate2022").classed('hidden', true);
      d3.select("#assistant2022").classed('hidden', true);
      d3.select("#lecturer2022").classed('hidden', true);

      d3.select("#dis2023").classed('hidden', false);
      d3.select("#prof2023").classed('hidden', false);
      d3.select("#total2023").classed('hidden', false);
      d3.select("#associate2023").classed('hidden', false);
      d3.select("#assistant2023").classed('hidden', false);
      d3.select("#lecturer2023").classed('hidden', false);


      d3.select("#_x32_022-m").classed('hidden', true);
      d3.select("#_x32_023-m").classed('hidden', false);

      d3.select("#mdis2022").classed('hidden', true);
      d3.select("#mprof2022").classed('hidden', true);
      d3.select("#mtotal2022").classed('hidden', true);
      d3.select("#massociate2022").classed('hidden', true);
      d3.select("#massistant2022").classed('hidden', true);
      d3.select("#mlecturer2022").classed('hidden', true);

      d3.select("#mdis2023").classed('hidden', false);
      d3.select("#mprof2023").classed('hidden', false);
      d3.select("#mtotal2023").classed('hidden', false);
      d3.select("#massociate2023").classed('hidden', false);
      d3.select("#massistant2023").classed('hidden', false);
      d3.select("#mlecturer2023").classed('hidden', false);

      d3.select("#_x32_022-s").classed('hidden', true);
      d3.select("#_x32_023-s").classed('hidden', false);

      d3.select("#sdis2022").classed('hidden', true);
      d3.select("#sprof2022").classed('hidden', true);
      d3.select("#stotal2022").classed('hidden', true);
      d3.select("#sassociate2022").classed('hidden', true);
      d3.select("#sassistant2022").classed('hidden', true);
      d3.select("#slecturer2022").classed('hidden', true);

      d3.select("#sdis2023").classed('hidden', false);
      d3.select("#sprof2023").classed('hidden', false);
      d3.select("#stotal2023").classed('hidden', false);
      d3.select("#sassociate2023").classed('hidden', false);
      d3.select("#sassistant2023").classed('hidden', false);
      d3.select("#slecturer2023").classed('hidden', false);
    });

    // Step-out: When a section is scrolled out of (triggered when scrolling back up)
    d3.select("#step-zero").on('stepout', function (e) {
      if (e.detail.direction === 'up') {
        // 1200 px
        d3.select("#g-ai0-8").classed('hidden', false);
        d3.select("#g-ai0-11").classed('hidden', false);
        d3.select("#g-ai0-18").classed('hidden', false);
        d3.select("#g-ai0-26").classed('hidden', false);

        d3.select("#g-ai0-7").classed('hidden', true);
        d3.select("#g-ai0-14").classed('hidden', true);
        d3.select("#g-ai0-23").classed('hidden', true);
        d3.select("#g-ai0-27").classed('hidden', true);

        d3.select("#change2019-back2021 path")
          .classed("fade-in", true)
          .style("fill", "#005f73");

        // 600 px
        d3.select("#_x32_018-m").classed('hidden', false);
        d3.select("#_x32_019-m").classed('hidden', true);

        d3.select("#mdis2018").classed('hidden', false);
        d3.select("#mprof2018").classed('hidden', false);
        d3.select("#mtotal2018").classed('hidden', false);
        d3.select("#massociate2018").classed('hidden', false);
        d3.select("#massistant2018").classed('hidden', false);
        d3.select("#mlecturer2018").classed('hidden', false);

        d3.select("#mdis2019").classed('hidden', true);
        d3.select("#mprof2019").classed('hidden', true);
        d3.select("#mtotal2019").classed('hidden', true);
        d3.select("#massociate2019").classed('hidden', true);
        d3.select("#massistant2019").classed('hidden', true);
        d3.select("#mlecturer2019").classed('hidden', true);

        // 300 px
        d3.select("#_x32_018-s").classed('hidden', false);
        d3.select("#_x32_019-s").classed('hidden', true);

        d3.select("#sdis2018").classed('hidden', false);
        d3.select("#sprof2018").classed('hidden', false);
        d3.select("#stotal2018").classed('hidden', false);
        d3.select("#sassociate2018").classed('hidden', false);
        d3.select("#sassistant2018").classed('hidden', false);
        d3.select("#slecturer2018").classed('hidden', false);

        d3.select("#sdis2019").classed('hidden', true);
        d3.select("#sprof2019").classed('hidden', true);
        d3.select("#stotal2019").classed('hidden', true);
        d3.select("#sassociate2019").classed('hidden', true);
        d3.select("#sassistant2019").classed('hidden', true);
        d3.select("#slecturer2019").classed('hidden', true);
      }
    });

    d3.select("#step-one").on('stepout', function (e) {
      if (e.detail.direction === 'up') {
        d3.select("#g-ai0-7").classed('hidden', false);
        d3.select("#g-ai0-14").classed('hidden', false);
        d3.select("#g-ai0-23").classed('hidden', false);
        d3.select("#g-ai0-27").classed('hidden', false);

        d3.select("#g-ai0-12").classed('hidden', true);
        d3.select("#g-ai0-3").classed('hidden', true);
        d3.select("#g-ai0-22").classed('hidden', true);
        d3.select("#g-ai0-30").classed('hidden', true);

        d3.select("#_x32_019-l").classed('hidden', false); // Unhide when scrolling back up
        d3.select("#_x32_020-l").classed('hidden', true);  // Hide the current layer

        d3.select("#dis2019").classed('hidden', false);
        d3.select("#prof2019").classed('hidden', false);
        d3.select("#total2019").classed('hidden', false);
        d3.select("#associate2019").classed('hidden', false);
        d3.select("#assistant2019").classed('hidden', false);
        d3.select("#lecturer2019").classed('hidden', false);

        d3.select("#dis2020").classed('hidden', true);
        d3.select("#prof2020").classed('hidden', true);
        d3.select("#total2020").classed('hidden', true);
        d3.select("#associate2020").classed('hidden', true);
        d3.select("#assistant2020").classed('hidden', true);
        d3.select("#lecturer2020").classed('hidden', true);

        d3.select("#_x32_019-m").classed('hidden', false); // Unhide when scrolling back up
        d3.select("#_x32_020-m").classed('hidden', true);  // Hide the current layer

        d3.select("#mdis2019").classed('hidden', false);
        d3.select("#mprof2019").classed('hidden', false);
        d3.select("#mtotal2019").classed('hidden', false);
        d3.select("#massociate2019").classed('hidden', false);
        d3.select("#massistant2019").classed('hidden', false);
        d3.select("#mlecturer2019").classed('hidden', false);

        d3.select("#mdis2020").classed('hidden', true);
        d3.select("#mprof2020").classed('hidden', true);
        d3.select("#mtotal2020").classed('hidden', true);
        d3.select("#massociate2020").classed('hidden', true);
        d3.select("#massistant2020").classed('hidden', true);
        d3.select("#mlecturer2020").classed('hidden', true);

        d3.select("#_x32_019-s").classed('hidden', false); // Unhide when scrolling back up
        d3.select("#_x32_020-s").classed('hidden', true);  // Hide the current layer

        d3.select("#sdis2019").classed('hidden', false);
        d3.select("#sprof2019").classed('hidden', false);
        d3.select("#stotal2019").classed('hidden', false);
        d3.select("#sassociate2019").classed('hidden', false);
        d3.select("#sassistant2019").classed('hidden', false);
        d3.select("#slecturer2019").classed('hidden', false);

        d3.select("#sdis2020").classed('hidden', true);
        d3.select("#sprof2020").classed('hidden', true);
        d3.select("#stotal2020").classed('hidden', true);
        d3.select("#sassociate2020").classed('hidden', true);
        d3.select("#sassistant2020").classed('hidden', true);
        d3.select("#slecturer2020").classed('hidden', true);
      }
    });

    d3.select("#step-two").on('stepout', function (e) {
      if (e.detail.direction === 'up') {
        d3.select("#g-ai0-3").classed('hidden', false);
        d3.select("#g-ai0-12").classed('hidden', false);
        d3.select("#g-ai0-22").classed('hidden', false);
        d3.select("#g-ai0-30").classed('hidden', false);

        d3.select("#g-ai0-4").classed('hidden', true);
        d3.select("#g-ai0-13").classed('hidden', true);
        d3.select("#g-ai0-19").classed('hidden', true);
        d3.select("#g-ai0-29").classed('hidden', true);

        d3.select("#change2019-back2021 path")
          .classed("fade-in", true)
          .style("fill", "#f3722c");

        d3.select("#_x32_020-l").classed('hidden', false);
        d3.select("#_x32_021-l").classed('hidden', true);

        d3.select("#dis2020").classed('hidden', false);
        d3.select("#prof2020").classed('hidden', false);
        d3.select("#total2020").classed('hidden', false);
        d3.select("#associate2020").classed('hidden', false);
        d3.select("#assistant2020").classed('hidden', false);
        d3.select("#lecturer2020").classed('hidden', false);

        d3.select("#dis2021").classed('hidden', true);
        d3.select("#prof2021").classed('hidden', true);
        d3.select("#total2021").classed('hidden', true);
        d3.select("#associate2021").classed('hidden', true);
        d3.select("#assistant2021").classed('hidden', true);
        d3.select("#lecturer2021").classed('hidden', true);

        d3.select("#_x32_020-m").classed('hidden', false);
        d3.select("#_x32_021-m").classed('hidden', true);

        d3.select("#mdis2020").classed('hidden', false);
        d3.select("#mprof2020").classed('hidden', false);
        d3.select("#mtotal2020").classed('hidden', false);
        d3.select("#massociate2020").classed('hidden', false);
        d3.select("#massistant2020").classed('hidden', false);
        d3.select("#mlecturer2020").classed('hidden', false);

        d3.select("#mdis2021").classed('hidden', true);
        d3.select("#mprof2021").classed('hidden', true);
        d3.select("#mtotal2021").classed('hidden', true);
        d3.select("#massociate2021").classed('hidden', true);
        d3.select("#massistant2021").classed('hidden', true);
        d3.select("#mlecturer2021").classed('hidden', true);

        d3.select("#_x32_020-s").classed('hidden', false);
        d3.select("#_x32_021-s").classed('hidden', true);

        d3.select("#sdis2020").classed('hidden', false);
        d3.select("#sprof2020").classed('hidden', false);
        d3.select("#stotal2020").classed('hidden', false);
        d3.select("#sassociate2020").classed('hidden', false);
        d3.select("#sassistant2020").classed('hidden', false);
        d3.select("#slecturer2020").classed('hidden', false);

        d3.select("#sdis2021").classed('hidden', true);
        d3.select("#sprof2021").classed('hidden', true);
        d3.select("#stotal2021").classed('hidden', true);
        d3.select("#sassociate2021").classed('hidden', true);
        d3.select("#sassistant2021").classed('hidden', true);
        d3.select("#slecturer2021").classed('hidden', true);
      }
    });

    d3.select("#step-three").on('stepout', function (e) {
      if (e.detail.direction === 'up') {
        d3.select("#g-ai0-4").classed('hidden', false);
        d3.select("#g-ai0-13").classed('hidden', false);
        d3.select("#g-ai0-19").classed('hidden', false);
        d3.select("#g-ai0-29").classed('hidden', false);

        d3.select("#g-ai0-5").classed('hidden', true);
        d3.select("#g-ai0-9").classed('hidden', true);
        d3.select("#g-ai0-20").classed('hidden', true);
        d3.select("#g-ai0-31").classed('hidden', true);

        d3.select("#change2019-back2021 path")
          .classed("fade-in", true)
          .style("fill", "#005f73");

        d3.select("#change-2022 path")
          .classed("fade-in", true)
          .style("fill", "#005f73");

        d3.select("#_x32_021-l").classed('hidden', false);
        d3.select("#_x32_022-l").classed('hidden', true);

        d3.select("#dis2021").classed('hidden', false);
        d3.select("#prof2021").classed('hidden', false);
        d3.select("#total2021").classed('hidden', false);
        d3.select("#associate2021").classed('hidden', false);
        d3.select("#assistant2021").classed('hidden', false);
        d3.select("#lecturer2021").classed('hidden', false);

        d3.select("#dis2022").classed('hidden', true);
        d3.select("#prof2022").classed('hidden', true);
        d3.select("#total2022").classed('hidden', true);
        d3.select("#associate2022").classed('hidden', true);
        d3.select("#assistant2022").classed('hidden', true);
        d3.select("#lecturer2022").classed('hidden', true);

        d3.select("#_x32_021-m").classed('hidden', false);
        d3.select("#_x32_022-m").classed('hidden', true);

        d3.select("#mdis2021").classed('hidden', false);
        d3.select("#mprof2021").classed('hidden', false);
        d3.select("#mtotal2021").classed('hidden', false);
        d3.select("#massociate2021").classed('hidden', false);
        d3.select("#massistant2021").classed('hidden', false);
        d3.select("#mlecturer2021").classed('hidden', false);

        d3.select("#mdis2022").classed('hidden', true);
        d3.select("#mprof2022").classed('hidden', true);
        d3.select("#mtotal2022").classed('hidden', true);
        d3.select("#massociate2022").classed('hidden', true);
        d3.select("#massistant2022").classed('hidden', true);
        d3.select("#mlecturer2022").classed('hidden', true);


        d3.select("#_x32_021-s").classed('hidden', false);
        d3.select("#_x32_022-s").classed('hidden', true);

        d3.select("#sdis2021").classed('hidden', false);
        d3.select("#sprof2021").classed('hidden', false);
        d3.select("#stotal2021").classed('hidden', false);
        d3.select("#sassociate2021").classed('hidden', false);
        d3.select("#sassistant2021").classed('hidden', false);
        d3.select("#slecturer2021").classed('hidden', false);

        d3.select("#sdis2022").classed('hidden', true);
        d3.select("#sprof2022").classed('hidden', true);
        d3.select("#stotal2022").classed('hidden', true);
        d3.select("#sassociate2022").classed('hidden', true);
        d3.select("#sassistant2022").classed('hidden', true);
        d3.select("#slecturer2022").classed('hidden', true);
      }
    });

    d3.select("#step-four").on('stepout', function (e) {
      if (e.detail.direction === 'up') {
        d3.select("#g-ai0-5").classed('hidden', false);
        d3.select("#g-ai0-9").classed('hidden', false);
        d3.select("#g-ai0-20").classed('hidden', false);
        d3.select("#g-ai0-31").classed('hidden', false);

        d3.select("#g-ai0-6").classed('hidden', true);
        d3.select("#g-ai0-10").classed('hidden', true);
        d3.select("#g-ai0-21").classed('hidden', true);
        d3.select("#g-ai0-28").classed('hidden', true);

        d3.select("#change_2023 path")
          .classed("fade-in", true)
          .style("fill", "#005f73");

        d3.select("#_x32_022-l").classed('hidden', false);
        d3.select("#_x32_023-l").classed('hidden', true);

        d3.select("#dis2022").classed('hidden', false);
        d3.select("#prof2022").classed('hidden', false);
        d3.select("#total2022").classed('hidden', false);
        d3.select("#associate2022").classed('hidden', false);
        d3.select("#assistant2022").classed('hidden', false);
        d3.select("#lecturer2022").classed('hidden', false);

        d3.select("#dis2023").classed('hidden', true);
        d3.select("#prof2023").classed('hidden', true);
        d3.select("#total2023").classed('hidden', true);
        d3.select("#associate2023").classed('hidden', true);
        d3.select("#assistant2023").classed('hidden', true);
        d3.select("#lecturer2023").classed('hidden', true);

        d3.select("#_x32_022-m").classed('hidden', false);
        d3.select("#_x32_023-m").classed('hidden', true);

        d3.select("#mdis2022").classed('hidden', false);
        d3.select("#mprof2022").classed('hidden', false);
        d3.select("#mtotal2022").classed('hidden', false);
        d3.select("#massociate2022").classed('hidden', false);
        d3.select("#massistant2022").classed('hidden', false);
        d3.select("#mlecturer2022").classed('hidden', false);

        d3.select("#mdis2023").classed('hidden', true);
        d3.select("#mprof2023").classed('hidden', true);
        d3.select("#mtotal2023").classed('hidden', true);
        d3.select("#massociate2023").classed('hidden', true);
        d3.select("#massistant2023").classed('hidden', true);
        d3.select("#mlecturer2023").classed('hidden', true);

        d3.select("#_x32_022-s").classed('hidden', false);
        d3.select("#_x32_023-s").classed('hidden', true);

        d3.select("#sdis2022").classed('hidden', false);
        d3.select("#sprof2022").classed('hidden', false);
        d3.select("#stotal2022").classed('hidden', false);
        d3.select("#sassociate2022").classed('hidden', false);
        d3.select("#sassistant2022").classed('hidden', false);
        d3.select("#slecturer2022").classed('hidden', false);

        d3.select("#sdis2023").classed('hidden', true);
        d3.select("#sprof2023").classed('hidden', true);
        d3.select("#stotal2023").classed('hidden', true);
        d3.select("#sassociate2023").classed('hidden', true);
        d3.select("#sassistant2023").classed('hidden', true);
        d3.select("#slecturer2023").classed('hidden', true);
      }
    });
  </script>

  <script>
    const scroller = scrollama();

    scroller
      .setup({
        step: "#scrolly .scrolly-overlay .step",
        offset: 0.5,
        debug: false
      })
      .onStepEnter(function ({ element, index, direction }) {
        const event = new CustomEvent('stepin', { detail: { direction: direction } })
        element.dispatchEvent(event);
      })
      .onStepExit(function ({ element, index, direction }) {
        const event = new CustomEvent('stepout', { detail: { direction: direction } })
        element.dispatchEvent(event);
      });

    window.addEventListener("resize", scroller.resize);
  </script>

  <!-- ai2html resizer script -->

  <script type="text/javascript">
    (function () {
      // only want one resizer on the page
      if (document.documentElement.className.indexOf("g-resizer-v3-init") > -1) return;
      document.documentElement.className += " g-resizer-v3-init";
      // require IE9+
      if (!("querySelector" in document)) return;
      function resizer() {
        var elements = Array.prototype.slice.call(document.querySelectorAll(".g-artboard[data-min-width]")),
          widthById = {};
        elements.forEach(function (el) {
          var parent = el.parentNode,
            width = widthById[parent.id] || parent.getBoundingClientRect().width,
            minwidth = el.getAttribute("data-min-width"),
            maxwidth = el.getAttribute("data-max-width");
          widthById[parent.id] = width;

          if (+minwidth <= width && (+maxwidth >= width || maxwidth === null)) {
            el.style.display = "block";
          } else {
            el.style.display = "none";
          }
        });
        try {
          if (window.parent && window.parent.$) {
            window.parent.$("body").trigger("resizedcontent", [window]);
          }
          if (window.require) {
            require(['foundation/main'], function () {
              require(['shared/interactive/instances/app-communicator'], function (AppCommunicator) {
                AppCommunicator.triggerResize();
              });
            });
          }
        } catch (e) { console.log(e); }
      }

      document.addEventListener('DOMContentLoaded', resizer);
      // feel free to replace throttle with _.throttle, if available
      window.addEventListener('resize', throttle(resizer, 200));

      function throttle(func, wait) {
        // from underscore.js
        var _now = Date.now || function () { return new Date().getTime(); },
          context, args, result, timeout = null, previous = 0;
        var later = function () {
          previous = _now();
          timeout = null;
          result = func.apply(context, args);
          if (!timeout) context = args = null;
        };
        return function () {
          var now = _now(), remaining = wait - (now - previous);
          context = this;
          args = arguments;
          if (remaining <= 0 || remaining > wait) {
            if (timeout) {
              clearTimeout(timeout);
              timeout = null;
            }
            previous = now;
            result = func.apply(context, args);
            if (!timeout) context = args = null;
          } else if (!timeout && options.trailing !== false) {
            timeout = setTimeout(later, remaining);
          }
          return result;
        };
      }

    })();
  </script>
  <script>
    // Variables to control scroll speed and easing
    let scrollPosition = 0;
    let scrollTarget = 0;
    let easeFactor = 0.2; // This controls the "smoothness" or delay

    // Event listener for mouse wheel (desktop scroll)
    window.addEventListener('wheel', function (event) {
      event.preventDefault(); // Prevent default scroll behavior
      scrollTarget += event.deltaY * 0.5; // Adjust this factor to change scroll speed
    }, { passive: false });

    // Throttle function to limit how often resizer is called
    function throttle(func, limit) {
      let lastFunc, lastRan;
      return function () {
        const context = this, args = arguments;
        if (!lastRan) {
          func.apply(context, args);
          lastRan = Date.now();
        } else {
          clearTimeout(lastFunc);
          lastFunc = setTimeout(function () {
            if ((Date.now() - lastRan) >= limit) {
              func.apply(context, args);
              lastRan = Date.now();
            }
          }, limit - (Date.now() - lastRan));
        }
      };
    }

    // Function to update scroll position with easing and call resizer
    function updateScroll() {
      scrollPosition += (scrollTarget - scrollPosition) * easeFactor;
      window.scrollTo(0, scrollPosition); // Scroll manually

      // Throttled resizer call
      throttledResizer();

      requestAnimationFrame(updateScroll); // Keep updating
    }

    // Resizer function for dynamic layout adjustments
    function resizer() {
      var elements = Array.prototype.slice.call(document.querySelectorAll(".g-artboard[data-min-width]")),
        widthById = {};
      elements.forEach(function (el) {
        var parent = el.parentNode,
          width = widthById[parent.id] || parent.getBoundingClientRect().width,
          minwidth = el.getAttribute("data-min-width"),
          maxwidth = el.getAttribute("data-max-width");
        widthById[parent.id] = width;

        if (+minwidth <= width && (+maxwidth >= width || maxwidth === null)) {
          el.style.display = "block";
        } else {
          el.style.display = "none";
        }
      });
    }

    // Throttled resizer for performance
    const throttledResizer = throttle(resizer, 100);

    // Ensure resizer is called on window resize
    window.addEventListener('resize', function () {
      throttledResizer();
    });

    // Start the manual scroll animation
    updateScroll();
  </script>


</body>

</html>